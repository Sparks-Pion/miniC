## 任务201：Flex minic词法分析（一）

### 任务描述

在基本掌握了前面的`Flex`与`Bison`工具后，我们将利用两种工具，逐步完成对Mini-C语言的结构分析。

Mini-C语言的词法、语法规则，见实验指导书中的附录。[Mini-C语言词法、语法规则](../resource/%E9%99%84%E5%BD%95A-C.pdf)。

与前一次实验完成PL语言词法识别类似，我们使用Flex词法分析工具，对Mini-C语言程序进行词法分析。

另外，我们还需要检测出词法错误，包括：未定义字符和不符合词法定义的字符串。

我们继续使用工程问题的处理思路，将大问题分解为子问题，逐步完成。
将词法分析问题分解为3个子任务，逐步完成设计实现。

#### 子任务1

首先，能够识别参考资料定义的单词，见如下样例。

注意，构造的词法规则，规则出现顺序对分析结果是有影响的。

实验系统，指导老师已经在编写代码的区域，提供了第一个测试样例对应的代码及答案。请利用前面掌握的flex使用方法，完成Mini-C语言的单词识别任务。

以下是词法定义的单词列表，与之对应的词法规则，见参考书附录。

```python
INT
FLOAT
ID
SEMI
COMMA
ASSIGNOP
PLUS
MINUS
STAR
DIV
AND
OR
DOT
NOT
TYPE
LP
RP
LB
RB
LC
RC
STRUCT
RETURN
IF
ELSE
WHILE
```

### 相关知识

1. 会使用Flex编写规则
2. 会编写简单字符串匹配正则。
3. 会编写复杂字符串匹配正则。
4. 能理解Flex中规则顺序与识别过程。

### 编程要求

根据提供的四个文件：`minic.l main.cpp def.h Makefile`，阅读后，**修改其中的`minic.l`的代码**，完成对minic的单词识别。按照`minic.l`使用的`flexout`函数，完成输出。

对于错误的输出严格按照实验指导书中的格式，可以参考测试样例进行。

### 测试说明

请同学们学会对问题，分等级、分段进行测试；一般后续任务的难度递增，请根据自身能力、时间安排编写代码并进行测试。

**输入：**

```python
int inc()
{
  int i;
  i = i + 1;
} 
```

**输出：**

```python
TYPE  :int
ID    :inc
LP    :(
RP    :)
LC    :{
TYPE  :int
ID    :i
SEMI  :;
ID    :i
ASSIGNOP  :=
ID    :i
PLUS  :+
INT   :1
SEMI  :;
RC    :} 
```

### 思考问题

词法分析规则的顺序，是否会影响后续语法分析的正确性？
会影响，因为词法分析的规则是从上到下依次匹配的，如果前面的规则匹配了，后面的规则就不会再匹配了。

### 注意

1. 请将代码在本地保存备份，保存程序源及相应的说明、注释；
2. **记录实验过程中遇到的问题及其解决思路，作为实验报告最重要的部分。**
